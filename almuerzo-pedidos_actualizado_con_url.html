<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pedidos - Comedor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Crimson+Pro:wght@600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #2d5016;
            --primary-light: #4a7c2a;
            --secondary: #ff6b35;
            --accent: #f7931e;
            --bg: #faf8f3;
            --surface: #ffffff;
            --text: #2c2c2c;
            --text-light: #6b6b6b;
            --border: #e5dfd5;
            --success: #4caf50;
            --shadow: rgba(45, 80, 22, 0.08);
        }
        
        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 0.8s ease 3s forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }
        
        .welcome-logo {
            animation: scaleIn 1s ease, float 2s ease-in-out 1s infinite;
            margin-bottom: 2rem;
        }
        
        .welcome-logo img {
            height: 180px;
            filter: drop-shadow(0 8px 24px rgba(0,0,0,0.3));
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }
        
        .welcome-text {
            color: white;
            text-align: center;
            animation: slideUp 1s ease 0.5s backwards;
        }
        
        .welcome-text h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .welcome-text p {
            font-size: 1.2rem;
            opacity: 0.95;
        }
        
        .loading-dots {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .loading-dot {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            animation: bounce 1.4s ease-in-out infinite;
        }
        
        .loading-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loading-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .main-content {
            opacity: 0;
            animation: fadeIn 0.8s ease 3s forwards;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 2rem 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 50%;
        }
        
        .header h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
        }
        
        .tab {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-light);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab:hover {
            color: var(--primary);
            background: rgba(45, 80, 22, 0.03);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--secondary);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }
        
        .card-header h2 {
            font-family: 'Crimson Pro', serif;
            font-size: 1.8rem;
            color: var(--primary);
            font-weight: 700;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text);
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--bg);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(45, 80, 22, 0.08);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }
        
        .btn:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 80, 22, 0.25);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: var(--secondary);
        }
        
        .btn-secondary:hover {
            background: #ff8555;
        }
        
        .menu-week {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .day-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
        }
        
        .day-card:hover {
            border-color: var(--primary);
            box-shadow: 0 8px 24px var(--shadow);
            transform: translateY(-4px);
        }
        
        .day-card h3 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }
        
        .menu-item {
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: var(--bg);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .menu-item-label {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }
        
        .menu-item-value {
            color: var(--text);
            font-size: 0.95rem;
        }
        
        .order-section {
            background: linear-gradient(135deg, rgba(45, 80, 22, 0.03), rgba(247, 147, 30, 0.03));
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .menu-selector {
            display: grid;
            gap: 1rem;
        }
        
        .menu-type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .menu-type-card {
            background: var(--surface);
            border: 3px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .menu-type-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .menu-type-card:hover {
            border-color: var(--primary);
            transform: translateY(-8px);
            box-shadow: 0 12px 32px var(--shadow);
        }
        
        .menu-type-card:hover::before {
            transform: scaleX(1);
        }
        
        .menu-type-card.selected {
            border-color: var(--primary);
            background: rgba(45, 80, 22, 0.05);
            box-shadow: 0 12px 32px var(--shadow);
        }
        
        .menu-type-card.selected::before {
            transform: scaleX(1);
        }
        
        .menu-type-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        
        .menu-type-title {
            font-family: 'Crimson Pro', serif;
            font-size: 1.6rem;
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .menu-type-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .menu-type-desc {
            color: var(--text-light);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .menu-preview {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .menu-preview h3 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .price-badge {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            margin-left: 0.5rem;
        }
        
        .input-price {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .input-price input {
            flex: 1;
        }
        
        .input-price .currency {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.1rem;
        }
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .menu-option:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 16px var(--shadow);
        }
        
        .menu-option.selected {
            border-color: var(--primary);
            background: rgba(45, 80, 22, 0.05);
            box-shadow: 0 4px 16px var(--shadow);
        }
        
        .menu-option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-top: 0.2rem;
            accent-color: var(--primary);
        }
        
        .menu-option-content {
            flex: 1;
        }
        
        .menu-option-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }
        
        .menu-option-desc {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .qr-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            animation: fadeIn 0.3s ease;
        }
        
        .qr-modal.active {
            display: flex;
        }
        
        .qr-content {
            background: var(--surface);
            border-radius: 20px;
            padding: 2rem;
            max-width: 450px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .qr-content h2 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }
        
        .qr-header-logo {
            margin-bottom: 1rem;
        }
        
        .qr-header-logo img {
            height: 60px;
        }
        
        .qr-code {
            background: white;
            padding: 1.5rem;
            border-radius: 16px;
            margin: 1.5rem auto;
            display: inline-block;
            box-shadow: 0 4px 20px var(--shadow);
            border: 3px solid var(--border);
        }
        
        .qr-footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .qr-footer-label {
            font-weight: 600;
            margin-bottom: 0.25rem;
            opacity: 0.9;
        }
        
        .qr-footer-value {
            font-size: 1.1rem;
            font-weight: 700;
        }
        
        .order-details {
            background: var(--bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: left;
        }
        
        .order-details-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
        }
        
        .order-details-row:last-child {
            border-bottom: none;
        }
        
        .order-details-label {
            font-weight: 600;
            color: var(--text-light);
        }
        
        .order-details-value {
            color: var(--text);
            text-align: right;
        }
        
        .alert {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 1rem 1.25rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-light);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .container {
                padding: 1.5rem 1rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .menu-week {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            overflow-x: auto;
            display: block;
        }
        
        .orders-table table {
            width: 100%;
            min-width: 800px;
        }
        
        .orders-table th {
            background: var(--primary);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        .orders-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .orders-table tr:hover {
            background: rgba(45, 80, 22, 0.03);
        }
        
        .order-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .badge-completo {
            background: rgba(74, 124, 42, 0.15);
            color: var(--primary);
        }
        
        .badge-segundo {
            background: rgba(255, 107, 53, 0.15);
            color: var(--secondary);
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .summary-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        
        .summary-card-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .summary-card-label {
            color: var(--text-light);
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        .summary-card-total {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-color: var(--primary);
        }
        
        .summary-card-total .summary-card-value {
            color: white;
        }
        
        .summary-card-total .summary-card-label {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            animation: fadeIn 0.3s ease;
        }
        
        .admin-login-modal.active {
            display: flex;
        }
        
        .login-box {
            background: var(--surface);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }
        
        .login-box h2 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.8rem;
        }
        
        .admin-btn {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .payment-method-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .payment-card {
            background: var(--surface);
            border: 3px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px var(--shadow);
        }
        
        .payment-card.selected {
            border-color: var(--primary);
            background: rgba(45, 80, 22, 0.05);
            box-shadow: 0 8px 24px var(--shadow);
        }
        
        .payment-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }
        
        .payment-title {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        
        .payment-desc {
            color: var(--text-light);
            font-size: 0.85rem;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Pantalla de Bienvenida -->
    <div class="welcome-screen">
        <div class="welcome-logo">
            <img src="logo-la-morena.png" alt="La Morena">
        </div>
        <div class="welcome-text">
            <h1>SISTEMA DE PEDIDOS</h1>
            <p>ALMUERZO - LA MORENA</p>
        </div>
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
    </div>

    <div class="main-content">
    <div class="header">
        <img src="logo-la-morena.png" alt="La Morena" style="height: 120px; margin-bottom: 0.5rem; filter: drop-shadow(0 4px 12px rgba(0,0,0,0.2));">
        <h1>Sistema de Pedidos</h1>
        <p>Comedor Empresarial</p>
        <button class="admin-btn" onclick="showAdminLogin()">
            üîê Admin
        </button>
    </div>

    <div class="container">
        <div class="tabs" id="tabsContainer">
            <button class="tab active" onclick="switchTab('realizar-pedido')">Realizar Pedido</button>
            <button class="tab hidden" id="adminTabMenu" onclick="switchTab('administrar-menu')">Administrar Men√∫</button>
            <button class="tab hidden" id="adminTabPedidos" onclick="switchTab('ver-pedidos')">Ver Pedidos</button>
            <button class="btn hidden" id="logoutBtn" onclick="logout()" style="margin-left: auto; padding: 0.5rem 1rem;">Cerrar Sesi√≥n</button>
        </div>

        <!-- TAB: Realizar Pedido -->
        <div id="realizar-pedido" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <h2>Hacer mi Pedido</h2>
                </div>

                <div class="form-group">
                    <label>Selecciona el d√≠a</label>
                    <select id="orderDay" onchange="loadDayMenu()">
                        <option value="">-- Selecciona un d√≠a --</option>
                        <option value="Lunes">Lunes</option>
                        <option value="Martes">Martes</option>
                        <option value="Mi√©rcoles">Mi√©rcoles</option>
                        <option value="Jueves">Jueves</option>
                        <option value="Viernes">Viernes</option>
                    </select>
                </div>

                <div id="menuPreview" style="display: none;">
                    <div class="menu-preview">
                        <h3>üçΩÔ∏è Men√∫ del D√≠a</h3>
                        <div id="menuPreviewContent"></div>
                    </div>

                    <h3 style="margin-bottom: 1.5rem; font-family: 'Crimson Pro', serif; color: var(--primary); text-align: center;">Selecciona tu tipo de men√∫</h3>
                    <div class="menu-type-selector">
                        <div class="menu-type-card" onclick="selectMenuType('completo')">
                            <div class="menu-type-icon">üç≤</div>
                            <div class="menu-type-title">Men√∫ Completo</div>
                            <div class="menu-type-price" id="priceCompleto">Bs 25</div>
                            <div class="menu-type-desc">Incluye sopa + segundo de tu elecci√≥n</div>
                        </div>
                        <div class="menu-type-card" onclick="selectMenuType('segundo')">
                            <div class="menu-type-icon">üçñ</div>
                            <div class="menu-type-title">Solo Segundo</div>
                            <div class="menu-type-price" id="priceSegundo">Bs 18</div>
                            <div class="menu-type-desc">Solo el segundo plato de tu elecci√≥n</div>
                        </div>
                    </div>
                </div>

                <div id="menuOptions" style="display: none;">
                    <div class="order-section">
                        <h3 style="margin-bottom: 1.5rem; font-family: 'Crimson Pro', serif; color: var(--primary);">Selecciona tu Segundo</h3>
                        <div id="menuSelector" class="menu-selector"></div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tu Nombre Completo *</label>
                            <input type="text" id="orderName" placeholder="Ej: Juan P√©rez" required>
                        </div>
                        <div class="form-group">
                            <label>Hora de Llegada al Comedor *</label>
                            <input type="time" id="orderTime" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>M√©todo de Pago *</label>
                        <div class="payment-method-selector">
                            <div class="payment-card" onclick="selectPaymentMethod('qr')">
                                <div class="payment-icon">üì±</div>
                                <div class="payment-title">Pago por QR</div>
                                <div class="payment-desc">Escanea y paga</div>
                            </div>
                            <div class="payment-card" onclick="selectPaymentMethod('efectivo')">
                                <div class="payment-icon">üíµ</div>
                                <div class="payment-title">Efectivo en Caja</div>
                                <div class="payment-desc">Paga al recoger</div>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="submitOrder()" style="width: 100%; font-size: 1.1rem;">
                        <span id="orderButtonText">Confirmar Pedido y Generar QR</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- TAB: Administrar Men√∫ -->
        <div id="administrar-menu" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>Configurar Men√∫ Semanal</h2>
                </div>

                <div class="form-group">
                    <label>D√≠a de la Semana</label>
                    <select id="menuDay">
                        <option value="Lunes">Lunes</option>
                        <option value="Martes">Martes</option>
                        <option value="Mi√©rcoles">Mi√©rcoles</option>
                        <option value="Jueves">Jueves</option>
                        <option value="Viernes">Viernes</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Sopa del D√≠a *</label>
                    <input type="text" id="menuSopa" placeholder="Ej: Sopa de pollo con fideos">
                </div>

                <div class="form-group">
                    <label>Segundo 1 *</label>
                    <input type="text" id="menuSegundo1" placeholder="Ej: Bistec a lo pobre con arroz">
                </div>

                <div class="form-group">
                    <label>Segundo 2 *</label>
                    <input type="text" id="menuSegundo2" placeholder="Ej: Pollo al horno con papas">
                </div>

                <div class="form-group">
                    <label>Segundo Saludable *</label>
                    <input type="text" id="menuSaludable" placeholder="Ej: Ensalada de quinoa con vegetales">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Precio Men√∫ Completo (Bs) *</label>
                        <div class="input-price">
                            <span class="currency">Bs</span>
                            <input type="number" id="precioCompleto" placeholder="25" step="0.50" min="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Precio Solo Segundo (Bs) *</label>
                        <div class="input-price">
                            <span class="currency">Bs</span>
                            <input type="number" id="precioSegundo" placeholder="18" step="0.50" min="0">
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="saveMenu()" style="width: 100%;">
                    Guardar Men√∫ del D√≠a
                </button>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Men√∫ Semanal Actual</h2>
                </div>
                <div id="weeklyMenu" class="menu-week"></div>
            </div>
        </div>

        <!-- TAB: Ver Pedidos -->
        <div id="ver-pedidos" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>Registro de Pedidos</h2>
                    <button class="btn" onclick="exportOrders()" style="padding: 0.75rem 1.5rem;">
                        üì• Exportar
                    </button>
                </div>

                <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <div class="form-group" style="flex: 1; min-width: 200px; margin-bottom: 0;">
                        <label>Filtrar por d√≠a</label>
                        <select id="filterDay" onchange="filterOrders()">
                            <option value="">Todos los d√≠as</option>
                            <option value="Lunes">Lunes</option>
                            <option value="Martes">Martes</option>
                            <option value="Mi√©rcoles">Mi√©rcoles</option>
                            <option value="Jueves">Jueves</option>
                            <option value="Viernes">Viernes</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1; min-width: 200px; margin-bottom: 0;">
                        <label>Filtrar por tipo</label>
                        <select id="filterType" onchange="filterOrders()">
                            <option value="">Todos los tipos</option>
                            <option value="completo">Men√∫ Completo</option>
                            <option value="segundo">Solo Segundo</option>
                        </select>
                    </div>
                </div>

                <div id="ordersTable"></div>
                <div id="ordersSummary" style="margin-top: 2rem;"></div>
            </div>
        </div>
    </div>

    <!-- Modal Login Admin -->
    <div id="adminLoginModal" class="admin-login-modal">
        <div class="login-box">
            <h2>üîê Acceso Administrador</h2>
            <div class="form-group">
                <label>Usuario</label>
                <input type="text" id="adminUser" placeholder="Ingresa tu usuario">
            </div>
            <div class="form-group">
                <label>Contrase√±a</label>
                <input type="password" id="adminPassword" placeholder="Ingresa tu contrase√±a">
            </div>
            <button class="btn" onclick="loginAdmin()" style="width: 100%; margin-bottom: 0.5rem;">
                Iniciar Sesi√≥n
            </button>
            <button class="btn" onclick="closeAdminLogin()" style="width: 100%; background: var(--text-light);">
                Cancelar
            </button>
        </div>
    </div>

    <!-- Modal QR -->
    <div id="qrModal" class="qr-modal">
        <div class="qr-content">
            <div class="qr-header-logo">
                <img src="logo-la-morena.png" alt="La Morena">
            </div>
            
            <h2>‚úÖ Pedido Confirmado</h2>
            
            <div id="qrcode" class="qr-code"></div>
            
            <div id="orderDetails" class="order-details"></div>
            
            <div class="qr-footer">
                <div class="qr-footer-label">ID de Pedido</div>
                <div class="qr-footer-value" id="orderIdFooter">#000000</div>
            </div>
            
            <button class="btn" onclick="closeModal()" style="width: 100%; margin-top: 1.5rem;">Cerrar</button>
        </div>
    </div>

    <script>
        // ==========================================================
        // CONFIGURACI√ìN DE GOOGLE SHEETS
        // ==========================================================
        // Reemplaza esta URL con la de tu Google Apps Script Web App
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby3GWFbPBpTpI-kMyqev1OfnzIdDw1E4wo_1-QEGSjDkNe7AHK_4Dp8bc3VAbieBzfK/exec';
        
        // Fallback a localStorage si no hay conexi√≥n
        let weeklyMenu = JSON.parse(localStorage.getItem('weeklyMenu')) || {};
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let useGoogleSheets = true; // Activado para guardar/leer en Google Sheets
        
        // ==========================================================
        // CONFIGURACI√ìN DE ADMINISTRADOR
        // ==========================================================
        const ADMIN_USER = 'admin';  // Cambia esto por tu usuario
        const ADMIN_PASSWORD = 'lamorena2025';  // Cambia esto por tu contrase√±a
        let isAdminLoggedIn = localStorage.getItem('adminSession') === 'true';
        let selectedPaymentMethod = null;

        // Cargar men√∫ semanal al inicio
        displayWeeklyMenu();
        
        // Mostrar tabs de admin si ya est√° logueado
        if (isAdminLoggedIn) {
            showAdminTabs();
        }
        
        // ==========================================================
        // FUNCIONES DE AUTENTICACI√ìN ADMIN
        // ==========================================================
        
        function showAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('active');
        }
        
        function closeAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('active');
            document.getElementById('adminUser').value = '';
            document.getElementById('adminPassword').value = '';
        }
        
        function loginAdmin() {
            const user = document.getElementById('adminUser').value;
            const password = document.getElementById('adminPassword').value;
            
            if (user === ADMIN_USER && password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                localStorage.setItem('adminSession', 'true');
                showAdminTabs();
                closeAdminLogin();
                alert('‚úÖ Sesi√≥n iniciada correctamente');
            } else {
                alert('‚ùå Usuario o contrase√±a incorrectos');
            }
        }
        
        function showAdminTabs() {
            document.getElementById('adminTabMenu').classList.remove('hidden');
            document.getElementById('adminTabPedidos').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
        }
        
        function logout() {
            if (confirm('¬øSeguro que deseas cerrar sesi√≥n?')) {
                isAdminLoggedIn = false;
                localStorage.removeItem('adminSession');
                document.getElementById('adminTabMenu').classList.add('hidden');
                document.getElementById('adminTabPedidos').classList.add('hidden');
                document.getElementById('logoutBtn').classList.add('hidden');
                switchTab('realizar-pedido');
                alert('Sesi√≥n cerrada');
            }
        }
        
        // ==========================================================
        // FUNCIONES DE M√âTODO DE PAGO
        // ==========================================================
        
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        function switchTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Mostrar el tab seleccionado
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Recargar men√∫ semanal si estamos en admin
            if (tabName === 'administrar-menu') {
                displayWeeklyMenu();
            }
            
            // Mostrar pedidos si estamos en ver pedidos
            if (tabName === 'ver-pedidos') {
                displayOrders();
            }
        }

        function saveMenu() {
            const day = document.getElementById('menuDay').value;
            const sopa = document.getElementById('menuSopa').value.trim();
            const segundo1 = document.getElementById('menuSegundo1').value.trim();
            const segundo2 = document.getElementById('menuSegundo2').value.trim();
            const saludable = document.getElementById('menuSaludable').value.trim();
            const precioCompleto = document.getElementById('precioCompleto').value;
            const precioSegundo = document.getElementById('precioSegundo').value;

            if (!sopa || !segundo1 || !segundo2 || !saludable || !precioCompleto || !precioSegundo) {
                alert('Por favor completa todos los campos del men√∫ y los precios');
                return;
            }

            weeklyMenu[day] = {
                sopa,
                segundo1,
                segundo2,
                saludable,
                precioCompleto: parseFloat(precioCompleto),
                precioSegundo: parseFloat(precioSegundo)
            };

            // Guardar en localStorage
            localStorage.setItem('weeklyMenu', JSON.stringify(weeklyMenu));
            
            // Guardar en Google Sheets si est√° configurado
            if (useGoogleSheets && GOOGLE_SCRIPT_URL !== 'TU_URL_DE_GOOGLE_APPS_SCRIPT_AQUI') {
                saveMenuToSheets(day, weeklyMenu[day]);
            }
            
            // Limpiar formulario
            document.getElementById('menuSopa').value = '';
            document.getElementById('menuSegundo1').value = '';
            document.getElementById('menuSegundo2').value = '';
            document.getElementById('menuSaludable').value = '';
            document.getElementById('precioCompleto').value = '';
            document.getElementById('precioSegundo').value = '';

            displayWeeklyMenu();
            alert('‚úÖ Men√∫ guardado correctamente para ' + day);
        }
        
        async function saveMenuToSheets(day, menuData) {
            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'saveMenu',
                        day: day,
                        menu: menuData
                    })
                });
            } catch (error) {
                console.error('Error al guardar en Google Sheets:', error);
            }
        }

        function displayWeeklyMenu() {
            const container = document.getElementById('weeklyMenu');
            const days = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes'];
            
            if (Object.keys(weeklyMenu).length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <p>No hay men√∫s configurados a√∫n</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = days.map(day => {
                const menu = weeklyMenu[day];
                if (!menu) return '';

                return `
                    <div class="day-card">
                        <h3>${day}</h3>
                        <div class="menu-item">
                            <div class="menu-item-label">ü•£ Sopa</div>
                            <div class="menu-item-value">${menu.sopa}</div>
                        </div>
                        <div class="menu-item">
                            <div class="menu-item-label">üçñ Segundo 1</div>
                            <div class="menu-item-value">${menu.segundo1}</div>
                        </div>
                        <div class="menu-item">
                            <div class="menu-item-label">üçó Segundo 2</div>
                            <div class="menu-item-value">${menu.segundo2}</div>
                        </div>
                        <div class="menu-item">
                            <div class="menu-item-label">ü•ó Saludable</div>
                            <div class="menu-item-value">${menu.saludable}</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 1rem; padding-top: 1rem; border-top: 2px solid var(--border);">
                            <div>
                                <div style="font-size: 0.75rem; color: var(--text-light); font-weight: 600;">COMPLETO</div>
                                <div style="font-size: 1.2rem; color: var(--secondary); font-weight: 700;">Bs ${menu.precioCompleto || 0}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 0.75rem; color: var(--text-light); font-weight: 600;">SOLO SEGUNDO</div>
                                <div style="font-size: 1.2rem; color: var(--secondary); font-weight: 700;">Bs ${menu.precioSegundo || 0}</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        let selectedMenuType = null;

        function loadDayMenu() {
            const day = document.getElementById('orderDay').value;
            const menuPreviewDiv = document.getElementById('menuPreview');
            const menuPreviewContent = document.getElementById('menuPreviewContent');
            const menuOptionsDiv = document.getElementById('menuOptions');

            // Resetear selecci√≥n
            selectedMenuType = null;
            menuOptionsDiv.style.display = 'none';

            if (!day) {
                menuPreviewDiv.style.display = 'none';
                return;
            }

            const menu = weeklyMenu[day];
            if (!menu) {
                alert('No hay men√∫ configurado para ' + day + '. Por favor contacta al administrador.');
                menuPreviewDiv.style.display = 'none';
                return;
            }

            // Mostrar preview del men√∫
            menuPreviewContent.innerHTML = `
                <div style="display: grid; gap: 1rem;">
                    <div class="menu-item">
                        <div class="menu-item-label">ü•£ Sopa</div>
                        <div class="menu-item-value">${menu.sopa}</div>
                    </div>
                    <div class="menu-item">
                        <div class="menu-item-label">üçñ Segundo 1</div>
                        <div class="menu-item-value">${menu.segundo1}</div>
                    </div>
                    <div class="menu-item">
                        <div class="menu-item-label">üçó Segundo 2</div>
                        <div class="menu-item-value">${menu.segundo2}</div>
                    </div>
                    <div class="menu-item">
                        <div class="menu-item-label">ü•ó Saludable</div>
                        <div class="menu-item-value">${menu.saludable}</div>
                    </div>
                </div>
            `;

            // Actualizar precios en las tarjetas
            document.getElementById('priceCompleto').textContent = `Bs ${menu.precioCompleto || 0}`;
            document.getElementById('priceSegundo').textContent = `Bs ${menu.precioSegundo || 0}`;

            menuPreviewDiv.style.display = 'block';
        }

        function selectMenuType(type) {
            selectedMenuType = type;
            const day = document.getElementById('orderDay').value;
            const menu = weeklyMenu[day];
            const menuOptionsDiv = document.getElementById('menuOptions');
            const menuSelectorDiv = document.getElementById('menuSelector');

            // Actualizar selecci√≥n visual
            document.querySelectorAll('.menu-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');

            // Preparar opciones de segundo
            if (type === 'completo') {
                menuSelectorDiv.innerHTML = `
                    <p style="text-align: center; color: var(--text-light); margin-bottom: 1rem;">Tu men√∫ incluye sopa + un segundo a elegir</p>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="segundo1" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">üçñ Segundo 1</div>
                            <div class="menu-option-desc">${menu.segundo1}</div>
                        </div>
                    </label>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="segundo2" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">üçó Segundo 2</div>
                            <div class="menu-option-desc">${menu.segundo2}</div>
                        </div>
                    </label>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="saludable" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">ü•ó Opci√≥n Saludable</div>
                            <div class="menu-option-desc">${menu.saludable}</div>
                        </div>
                    </label>
                `;
            } else {
                menuSelectorDiv.innerHTML = `
                    <p style="text-align: center; color: var(--text-light); margin-bottom: 1rem;">Selecciona tu segundo</p>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="segundo1" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">üçñ Segundo 1</div>
                            <div class="menu-option-desc">${menu.segundo1}</div>
                        </div>
                    </label>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="segundo2" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">üçó Segundo 2</div>
                            <div class="menu-option-desc">${menu.segundo2}</div>
                        </div>
                    </label>
                    <label class="menu-option" onclick="selectOption(this)">
                        <input type="radio" name="menuChoice" value="saludable" required>
                        <div class="menu-option-content">
                            <div class="menu-option-title">ü•ó Opci√≥n Saludable</div>
                            <div class="menu-option-desc">${menu.saludable}</div>
                        </div>
                    </label>
                `;
            }

            menuOptionsDiv.style.display = 'block';
            menuOptionsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function selectOption(element) {
            document.querySelectorAll('.menu-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
        }

        function submitOrder() {
            const day = document.getElementById('orderDay').value;
            const name = document.getElementById('orderName').value.trim();
            const time = document.getElementById('orderTime').value;
            const selectedMenu = document.querySelector('input[name="menuChoice"]:checked');

            if (!day || !name || !time || !selectedMenu || !selectedMenuType) {
                alert('Por favor completa todos los campos y selecciona un tipo de men√∫');
                return;
            }
            
            if (!selectedPaymentMethod) {
                alert('Por favor selecciona un m√©todo de pago');
                return;
            }

            const menu = weeklyMenu[day];
            const menuType = selectedMenu.value;
            let menuDescription = '';
            let includeSoup = selectedMenuType === 'completo';
            let price = includeSoup ? menu.precioCompleto : menu.precioSegundo;

            switch(menuType) {
                case 'segundo1':
                    menuDescription = menu.segundo1;
                    break;
                case 'segundo2':
                    menuDescription = menu.segundo2;
                    break;
                case 'saludable':
                    menuDescription = menu.saludable;
                    break;
            }

            const order = {
                id: Date.now(),
                name,
                day,
                time,
                menuType: selectedMenuType,
                includeSoup,
                segundo: menuDescription,
                sopa: includeSoup ? menu.sopa : null,
                price,
                paymentMethod: selectedPaymentMethod,
                date: new Date().toLocaleString('es-ES')
            };

            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Guardar en Google Sheets si est√° configurado
            if (useGoogleSheets && GOOGLE_SCRIPT_URL !== 'TU_URL_DE_GOOGLE_APPS_SCRIPT_AQUI') {
                saveOrderToSheets(order);
            }

            // Mostrar QR
            showQRModal(order);

            // Limpiar formulario
            document.getElementById('orderName').value = '';
            document.getElementById('orderTime').value = '';
            document.getElementById('orderDay').value = '';
            document.querySelectorAll('.menu-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelectorAll('.menu-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.payment-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('menuPreview').style.display = 'none';
            document.getElementById('menuOptions').style.display = 'none';
            selectedMenuType = null;
            selectedPaymentMethod = null;
        }
        
        async function saveOrderToSheets(order) {
            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'saveOrder',
                        order: order
                    })
                });
            } catch (error) {
                console.error('Error al guardar pedido en Google Sheets:', error);
            }
        }

        function showQRModal(order) {
            const modal = document.getElementById('qrModal');
            const qrcodeDiv = document.getElementById('qrcode');
            const detailsDiv = document.getElementById('orderDetails');
            const orderIdFooter = document.getElementById('orderIdFooter');

            // Limpiar QR anterior
            qrcodeDiv.innerHTML = '';

            // Mostrar ID en el footer
            orderIdFooter.textContent = `#${order.id}`;

            // Preparar descripci√≥n del pedido
            let pedidoCompleto = '';
            if (order.includeSoup) {
                pedidoCompleto = `Sopa: ${order.sopa}\nSegundo: ${order.segundo}`;
            } else {
                pedidoCompleto = order.segundo;
            }
            
            const paymentMethodText = order.paymentMethod === 'qr' ? 'üì± Pago por QR' : 'üíµ Efectivo en Caja';
            const paymentIcon = order.paymentMethod === 'qr' ? 'üì±' : 'üíµ';

            // Mostrar detalles del pedido
            detailsDiv.innerHTML = `
                <div class="order-details-row">
                    <span class="order-details-label">üë§ Nombre:</span>
                    <span class="order-details-value">${order.name}</span>
                </div>
                <div class="order-details-row">
                    <span class="order-details-label">üìÖ D√≠a:</span>
                    <span class="order-details-value">${order.day}</span>
                </div>
                <div class="order-details-row">
                    <span class="order-details-label">üïê Hora:</span>
                    <span class="order-details-value">${order.time}</span>
                </div>
                <div class="order-details-row">
                    <span class="order-details-label">üçΩÔ∏è Tipo:</span>
                    <span class="order-details-value">${order.menuType === 'completo' ? 'Men√∫ Completo' : 'Solo Segundo'}</span>
                </div>
                ${order.includeSoup ? `
                <div class="order-details-row">
                    <span class="order-details-label">ü•£ Sopa:</span>
                    <span class="order-details-value">${order.sopa}</span>
                </div>
                ` : ''}
                <div class="order-details-row">
                    <span class="order-details-label">üçñ Segundo:</span>
                    <span class="order-details-value">${order.segundo}</span>
                </div>
                <div class="order-details-row">
                    <span class="order-details-label">${paymentIcon} Pago:</span>
                    <span class="order-details-value">${paymentMethodText}</span>
                </div>
                <div class="order-details-row" style="background: rgba(45, 80, 22, 0.05); margin: 0.5rem -1rem -1rem; padding: 1rem 1rem 0.5rem;">
                    <span class="order-details-label" style="font-size: 1.1rem;">üí∞ Total:</span>
                    <span class="order-details-value" style="font-size: 1.4rem; font-weight: 700; color: var(--secondary);">Bs ${order.price}</span>
                </div>
            `;

            // Generar QR con formato m√°s completo
            const qrData = `LA MORENA - PEDIDO #${order.id}
Nombre: ${order.name}
D√≠a: ${order.day} - ${order.time}
Tipo: ${order.menuType === 'completo' ? 'Men√∫ Completo' : 'Solo Segundo'}
${pedidoCompleto}
Pago: ${paymentMethodText}
Total: Bs ${order.price}`;
            
            new QRCode(qrcodeDiv, {
                text: qrData,
                width: 220,
                height: 220,
                colorDark: "#2d5016",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('qrModal').classList.remove('active');
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('qrModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // Funciones para el m√≥dulo de pedidos
        function displayOrders() {
            filterOrders();
        }
        
        function filterOrders() {
            const filterDay = document.getElementById('filterDay').value;
            const filterType = document.getElementById('filterType').value;
            const tableDiv = document.getElementById('ordersTable');
            const summaryDiv = document.getElementById('ordersSummary');
            
            let filteredOrders = orders.filter(order => {
                let matchDay = !filterDay || order.day === filterDay;
                let matchType = !filterType || order.menuType === filterType;
                return matchDay && matchType;
            });
            
            if (filteredOrders.length === 0) {
                tableDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <p>No hay pedidos registrados</p>
                    </div>
                `;
                summaryDiv.innerHTML = '';
                return;
            }
            
            // Ordenar por fecha (m√°s recientes primero)
            filteredOrders.sort((a, b) => b.id - a.id);
            
            // Generar tabla
            let tableHTML = `
                <div class="orders-table">
                    <table>
                        <thead>
                            <tr>
                                <th>#ID</th>
                                <th>Nombre</th>
                                <th>D√≠a</th>
                                <th>Hora</th>
                                <th>Tipo</th>
                                <th>Pedido</th>
                                <th>M√©todo Pago</th>
                                <th>Precio</th>
                                <th>Fecha Registro</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            filteredOrders.forEach(order => {
                const badgeClass = order.menuType === 'completo' ? 'badge-completo' : 'badge-segundo';
                const badgeText = order.menuType === 'completo' ? 'Completo' : 'Solo Segundo';
                const pedidoText = order.includeSoup ? `Sopa + ${order.segundo}` : order.segundo;
                const paymentText = order.paymentMethod === 'qr' ? 'üì± QR' : 'üíµ Efectivo';
                
                tableHTML += `
                    <tr>
                        <td><strong>#${order.id}</strong></td>
                        <td>${order.name}</td>
                        <td>${order.day}</td>
                        <td>${order.time}</td>
                        <td><span class="order-badge ${badgeClass}">${badgeText}</span></td>
                        <td style="max-width: 250px;">${pedidoText}</td>
                        <td>${paymentText}</td>
                        <td><strong style="color: var(--secondary);">Bs ${order.price}</strong></td>
                        <td style="font-size: 0.85rem; color: var(--text-light);">${order.date}</td>
                    </tr>
                `;
            });
            
            tableHTML += `
                        </tbody>
                    </table>
                </div>
            `;
            
            tableDiv.innerHTML = tableHTML;
            
            // Calcular resumen
            const totalPedidos = filteredOrders.length;
            const pedidosCompletos = filteredOrders.filter(o => o.menuType === 'completo').length;
            const pedidosSegundo = filteredOrders.filter(o => o.menuType === 'segundo').length;
            const totalIngresos = filteredOrders.reduce((sum, o) => sum + o.price, 0).toFixed(2);
            
            summaryDiv.innerHTML = `
                <h3 style="font-family: 'Crimson Pro', serif; color: var(--primary); margin-bottom: 1.5rem; text-align: center;">Resumen de Pedidos</h3>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-card-value">${totalPedidos}</div>
                        <div class="summary-card-label">Total Pedidos</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-card-value">${pedidosCompletos}</div>
                        <div class="summary-card-label">Men√∫ Completo</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-card-value">${pedidosSegundo}</div>
                        <div class="summary-card-label">Solo Segundo</div>
                    </div>
                    <div class="summary-card summary-card-total">
                        <div class="summary-card-value">Bs ${totalIngresos}</div>
                        <div class="summary-card-label">Ingresos Totales</div>
                    </div>
                </div>
            `;
        }
        
        function exportOrders() {
            if (orders.length === 0) {
                alert('No hay pedidos para exportar');
                return;
            }
            
            // Crear CSV
            let csv = 'ID,Nombre,D√≠a,Hora,Tipo Men√∫,Incluye Sopa,Sopa,Segundo,M√©todo Pago,Precio,Fecha Registro\n';
            
            orders.forEach(order => {
                const tipo = order.menuType === 'completo' ? 'Men√∫ Completo' : 'Solo Segundo';
                const sopa = order.includeSoup ? 'S√≠' : 'No';
                const sopaDesc = order.sopa || 'N/A';
                const paymentMethod = order.paymentMethod === 'qr' ? 'Pago por QR' : 'Efectivo en Caja';
                
                csv += `${order.id},"${order.name}",${order.day},${order.time},"${tipo}",${sopa},"${sopaDesc}","${order.segundo}","${paymentMethod}",${order.price},"${order.date}"\n`;
            });
            
            // Descargar
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `pedidos_la_morena_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
    </div>
</body>
</html>
